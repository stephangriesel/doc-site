---
title: Contentful ❤ Gatsby
slug: contentful
image: ./img/contentfullogo.png
date: 2016-05-18
author: Stephan
---

### Assumptions

- Your Gatsby site is set up already, if not refer to the [Gatsby post](https://doc.stephangriesel.com/gatsby).

### Set up content model

- Go to "Content model" in dashboard & add new "content type"
- Add content types as you please

### Connect Contentful

**Install Plugin**

- Go to Gatsbyjs.org and get details on the [plugin](https://www.gatsbyjs.org/packages/gatsby-source-contentful/) & install.
- Copy Delivery API object & add to gatsby-config.js

```
    {
      resolve: `gatsby-source-contentful`,
      options: {
        spaceId: `your_space_id`,
        // Learn about environment variables: https://gatsby.dev/env-vars
        accessToken: process.env.CONTENTFUL_ACCESS_TOKEN,
      },
    },
```

- Set up environment variables & copy keys from Contentful dashboard

1. Create .env.development \* .env.production in root
2. Add sensitive data in this the new .env files create, example: CONTENTFUL_ACCESS_TOKEN=yoursecretkey
3. Require **dotenv** in gatsby.config

```
require('dotenv').config({
  path: `.env.${process.env.NODE_ENV}`,
})
```

4. Add variable to config:

```
accessToken: process.env.CONTENTFUL_ACCESS_TOKEN
```

### Add query

Go to GraphiQL or Playground and test query. Once data received copy query. If images are used remember to update image source with [Gatsby Image Fragment](https://www.gatsbyjs.org/packages/gatsby-image/?=#fragments)

<div className="post-video">
  <iframe
    width="100%"
    height="615"
    src="https://www.youtube.com/embed/eKbLNXdmD6g"
    frameborder="0"
    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen
  ></iframe>
</div>

### Ut rutrum odio:

- Speruna Luxury Inn €160 for both nights
- Very central
- Fast wifi
- Wine and water in fridge
- Smart TV with all local channels, we just watched Netflix during our stay (on your own account of course)

<div className="post-image">

![](./img/gatsbylogo.png)

</div>
